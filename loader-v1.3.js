(function(){(function(e){var t;t={init:function(t){var n;n={top:"auto",autoOpen:!1,overlayOpacity:.5,overlayColor:"#000",overlayClose:!0,closeOnEscape:!0,closeButtonClass:".close",onOpen:!1,onClose:!1};t=e.extend(n,t);return this.each(function(){var n,r,i;i=t;r=e('<div class="lean-overlay"></div>');r.css({display:"none",position:"fixed","z-index":2e3,top:0,left:0,height:"100%",width:"100%",background:i.overlayColor,opacity:i.overlayOpacity}).appendTo("body");n=e(this);n.css({display:"none",position:"fixed","z-index":2001,left:"50%",borderRadius:"7px",top:parseInt(i.top)>-1?i.top+"px":"50%","margin-left":-(n.outerWidth()/2)+"px","margin-top":(parseInt(i.top)>-1?0:-(n.outerHeight()/2))+"px"});n.bind("openModal",function(t){e(this).css("display","block");return r.fadeIn(200,function(){if(i.onOpen&&typeof i.onOpen=="function")return i.onOpen(n[0])})});n.bind("closeModal",function(t){e(this).css("display","none");return r.fadeOut(200,function(){if(i.onClose&&typeof i.onClose=="function")return i.onClose(n[0])})});r.click(function(){if(i.overlayClose)return n.trigger("closeModal")});e(document).keydown(function(e){if(i.closeOnEscape&&e.keyCode===27)return n.trigger("closeModal")});n.find(i.closeButtonClass).click(function(e){n.trigger("closeModal");return e.preventDefault()});if(i.autoOpen)return n.trigger("openModal")})}};return e.fn.easyModal=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):typeof n=="object"||!n?t.init.apply(this,arguments):e.error("Method "+n+" does not exist on jQuery.easyModal")}})(jQuery);(function(e,t){"use strict";var n;n=function(){function n(t,n){this.trace("constructor");this.options=e.extend({},this.defaults,n);this.$el=e(t);if(this.options.iframe_widget){this.addWidget();this.addWidgetListeners()}this.options.side_btn&&this.addSideButton()}n.prototype.defaults={widget_domain:"//app.tablebookings.com/widgets/",widget_url:"",modal_width:!1,modal_height:!1,iframe_widget:!1,iframe_width:"100%",iframe_height:"100%",side_btn:!0};n.prototype.elements={side_btn_content:'<div id="WDG_sideBtn_ctn"><a href="#" id="WDG_sideBtn">Reservations Widget</a></div>',popup_widget_content:'<div id="WDG_popWidget"></div>',side_btn:"#WDG_sideBtn",popup_widget:"#WDG_popWidget"};n.prototype.isMobile=function(){return/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())};n.prototype.addWidget=function(){var e,t;e=this.options.widget_domain+this.options.widget_url;t='<iframe id="iframe_widget" src="'+e+'" class="iframe-class" style="width:100%;height:100%;" frameborder="0" allowtransparency="true"></iframe>';return this.$el.html(t)};n.prototype.addSideButton=function(){var t,n=this;e("body").append(this.elements.side_btn_content);e(this.elements.side_btn).css({position:"fixed",top:"20%",left:"0",width:"50px",height:"157px",background:"url(//d1u2f2r665j4oh.cloudfront.net/side_button.png)",textIndent:"-9999px",boxShadow:"2px 1px 4px #ccc",borderRadius:"5px"});t=JSON.stringify({url:this.options.widget_url});return e(this.elements.side_btn).on("click",function(e){n.loadModule({data:t});return e.preventDefault()})};n.prototype.addWidgetListeners=function(){var e,n,r,i=this;this.trace("adding listener for selecting the date for showing time");e=t.addEventListener?"addEventListener":"attachEvent";n=t[e];r=e==="attachEvent"?"onmessage":"message";return n(r,function(e){return i.loadModule(e)},!1)};n.prototype.openModal=function(){var n,r,i,s;n=e(t).height();r=e(t).width();s=this.options.modal_width?this.options.modal_width:r/1.2;i=this.options.modal_height?this.options.modal_height:n/1.6;e(this.elements.popup_widget).remove();e("body").append(this.elements.popup_widget_content);e(this.elements.popup_widget).css({width:s,height:i,top:"20%",background:"#fff",boxShadow:"0px 0px 7px #444",border:"5px solid #444",overflowY:"scroll"});e(this.elements.popup_widget).easyModal({top:"20%",overlayOpacity:.3,overlayColor:"#333",overlayClose:!0,closeOnEscape:!1});e(this.elements.popup_widget).append('<iframe id="WDG_widgetIframe" src="'+this.options.widget_domain+this.options.widget_url+'" class="iframe-class" style="width:100%;height:100%;" frameborder="0" allowtransparency="true"></iframe>');e("#WDG_widgetIframe").css({width:this.options.iframe_width,height:this.options.iframe_height,borderRadius:"7px"});return e(this.elements.popup_widget).trigger("openModal")};n.prototype.loadModule=function(e){var n;n=JSON.parse(e.data);this.options.widget_url=n.url;return this.isMobile()?t.open(this.options.widget_domain+this.options.widget_url,"_blank"):this.openModal()};n.prototype.trace=function(e){if(t.console!==undefined)return t.console.log("widgetLoader: "+e)};n.prototype.error=function(e){if(t.console!==undefined)return t.console.error("widgetLoader: "+e)};return n}();return e.fn.extend({widgetIframeLoader:function(t,r){return this.each(function(){var i,s;i=e(this);s=i.data("widgetIframeLoader");s||i.data("widgetIframeLoader",s=new n(this,t));if(typeof t=="string")return s[t].apply(s,r)})}})})(window.jQuery,window);window.onload=function(){_lopts.widget_container===void 0&&(_lopts.widget_container="body");return $(_lopts.widget_container).widgetIframeLoader(_lopts)}}).call(this);